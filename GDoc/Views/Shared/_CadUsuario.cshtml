@model GDoc.ViewModels.UsuarioViewModel

@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Usuário</h4>
        <hr />
        @Html.ValidationSummary(true)

        <div class="panel panel-primary" style="margin-left: 5px">
            <div class="panel-heading" style="padding: 5px 3px">
                <h4 class="panel-title">Identificação</h4>
            </div>
            <div class="panel-body" style="margin: 0px 10px">
                <div class="form-group">
                    <div class="row-fluid">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Login)
                            @Html.EditorFor(model => model.Login, new { htmlAttributes = new { @class = "form-control"}, })
                            @Html.ValidationMessageFor(model => model.Login)
                        </div>

                        <div class="col-md-8">
                            @Html.LabelFor(model => model.Nome)
                            @Html.EditorFor(model => model.Nome, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Nome)
                        </div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Cpf)
                            @Html.EditorFor(model => model.Cpf, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Cpf)
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.IdPerfil)
                            @Html.DropDownList("IdPerfil", null, String.Empty, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.IdPerfil)
                        </div>
                        <div class="col-md-3">
                            @Html.LabelFor(model => model.IdFilial)
                            @Html.DropDownList("IdFilial", null, String.Empty, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.IdFilial)
                        </div>
                        <div class="col-md-7">
                            @Html.LabelFor(model => model.Email)
                            @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Email)
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Empresa)
                            @Html.EditorFor(model => model.Empresa, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Empresa)
                        </div>
                        <div class="col-md-3">
                            @Html.LabelFor(model => model.Rg)
                            @Html.EditorFor(model => model.Rg, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Rg)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-primary" style="margin-left: 5px">
            <div class="panel-heading" style="padding: 5px 3px">
                <h4 class="panel-title">Localização</h4>
            </div>
            <div class="panel-body" style="margin: 0px 10px">
                <div class="form-group">
                    <div class="row-fluid">
                        <div class="col-md-9">
                            @Html.LabelFor(model => model.Endereco)
                            @Html.EditorFor(model => model.Endereco, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Endereco)
                        </div>
                        <div class="col-md-1">
                            @Html.LabelFor(model => model.NumeroEndereco)
                            @Html.EditorFor(model => model.NumeroEndereco, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.NumeroEndereco)
                        </div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Complemento)
                            @Html.EditorFor(model => model.Complemento, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Complemento)
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="col-md-4">
                            @Html.LabelFor(model => model.Bairro)
                            @Html.EditorFor(model => model.Bairro, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Bairro)
                        </div>
                        <div class="col-md-4">
                            @Html.LabelFor(model => model.Cidade)
                            @Html.EditorFor(model => model.Cidade, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Cidade)
                        </div>
                        <div class="col-md-1">
                            @Html.LabelFor(model => model.Uf)
                            @Html.EditorFor(model => model.Uf, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Uf)
                        </div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Cep)
                            @Html.EditorFor(model => model.Cep, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Cep)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-primary" style="margin-left: 5px">
            <div class="panel-heading" style="padding: 5px 3px">
                <h4 class="panel-title">Configuração</h4>
            </div>
            <div class="panel-body" style="margin: 0px 10px">
                <div class="form-group">
                    <div class="row-fluid">
                        <div class="col-md-1">
                            @Html.LabelFor(model => model.Ativo)
                            @Html.EditorFor(model => model.Ativo, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.Ativo)
                        </div>
                        <div class="col-md-3">
                            @Html.LabelFor(model => model.TrocarSenha)
                            @Html.EditorFor(model => model.TrocarSenha, new { htmlAttributes = new { @class = "form-control" }, })
                            @Html.ValidationMessageFor(model => model.TrocarSenha)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-primary" style="margin-left: 5px">
            <div class="panel-heading" style="padding: 5px 3px">
                <h4 class="panel-title">Telefones</h4>
            </div>
            <div class="panel-body" style="margin: 0px 10px">
                
                    @Html.Partial("_Telefone")    
                
            </div>
        </div>

        <script>
            @foreach (var t in Model.Telefones)
	        {
                if (t.IdTipoTelefone != null)
                {
                    @Html.Raw("addRowTelefone('" + t.Telefone + "', '" + ViewBag.TiposTelefone.Find(t.IdTipoTelefone).Nome + "', " + t.IdTipoTelefone + ");");	 
                }
                else
                {
                    @Html.Raw("addRowTelefone('" + t.Telefone + "', '', '');");
                }
	        }
            @Html.Raw("reorganizaIdTelefones()");
        </script>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Gravar" class="btn btn-primary" />
            </div>
        </div>
    </div>
    
    <script>
        $(function () {
            $("#Cpf").inputmask("999.999.999-99");
            $("#Cep").inputmask("99999-999");
        })
    </script>
}
